names_to = "condition")
prevs_long %>%
ggplot(aes(x = condition,
y = value,
size = n,
color = race_col_lab,
label = race_eth_text)) +
geom_point() +
geom_text(label = race_eth_text) +
scale_size_area(max_size = 20)
## Calculate unweighted prevalences of asthma and binge drinking
prevs <- brfss1720 %>%
group_by(race_eth_text,
race_col_lab) %>%
filter(n() >= 15) %>%
summarize(asthma = mean(asthma, na.rm = T)*100,
binge = mean(binge, na.rm = T)*100,
n = n())
## Scatterplot prevalences (go to long format first)
prevs_long <- prevs %>%
pivot_longer(cols = c("asthma", "binge"),
names_to = "condition")
prevs_long %>%
ggplot(aes(x = condition,
y = value,
size = n,
color = race_col_lab,
label = race_eth_text)) +
geom_point() +
geom_text() +
scale_size_area(max_size = 20)
prevs_long %>%
ggplot(aes(x = condition,
y = value,
#size = n,
#color = race_col_lab,
label = race_eth_text)) +
geom_point(size = n, color = race_col_lab) +
geom_text() +
scale_size_area(max_size = 20)
prevs_long %>%
ggplot(aes(x = condition,
y = value,
size = n,
color = race_col_lab,
label = race_eth_text)) +
geom_point() +
#geom_text() +
scale_size_area(max_size = 20)
prevs_long %>%
ggplot(aes(x = condition,
y = value,
size = n,
color = race_col_lab,
label = race_eth_text)) +
geom_point() +
geom_text() +
scale_size_area(max_size = 20)
prevs_long %>%
ggplot(aes(x = condition,
y = value,
size = n,
color = race_col_lab,
label = race_eth_text)) +
geom_point() +
geom_text(label.size = 0.25) +
scale_size_area(max_size = 20)
prevs_long %>%
ggplot(aes(x = condition,
y = value,
size = n,
color = race_col_lab,
label = race_eth_text)) +
geom_point() +
geom_text(inherit.aes = F) +
scale_size_area(max_size = 20)
prevs_long %>%
ggplot(aes(x = condition,
y = value,
size = n,
color = race_col_lab,
label = race_eth_text)) +
geom_point() +
geom_text(label = race_eth_text, inherit.aes = F) +
scale_size_area(max_size = 20)
prevs_long %>%
ggplot(aes(x = condition,
y = value,
size = n,
color = race_col_lab)) +
geom_point() +
geom_text(rownames(prevs_long)) +
scale_size_area(max_size = 20)
prevs_long %>%
ggplot(aes(x = condition,
y = value,
size = n,
color = race_col_lab)) +
geom_point() +
geom_text(label = rownames(prevs_long)) +
scale_size_area(max_size = 20)
prevs_long %>%
ggplot(aes(x = condition,
y = value,
size = n,
color = race_col_lab)) +
geom_point() +
geom_text(label = race_eth_text) +
scale_size_area(max_size = 20)
plot <- ggplot(data = prevs_long,
aes(x = condition,
y = value,
size = n,
color = race_col_lab)) +
geom_point() +
geom_text(label = race_eth_text) +
scale_size_area(max_size = 20)
prevs_long %>%
ggplot(aes(x = condition,
y = value,
size = n,
color = race_col_lab,
label = race_eth_text)) +
geom_point() +
geom_text() +
scale_size_area(max_size = 20)
prevs_long %>%
ggplot(aes(x = condition,
y = value,
size = n,
color = race_col_lab,
label = race_eth_text)) +
geom_point() +
scale_size_area(max_size = 20) +
geom_text()
prevs_long %>%
ggplot(aes(x = condition,
y = value,
size = n,
color = race_col_lab,
label = race_eth_text)) +
geom_point() +
scale_size_area(max_size = 20) +
geom_text(aes(label = race_eth_text))
prevs_long %>%
ggplot(aes(x = condition,
y = value,
size = n,
color = race_col_lab,
label = race_eth_text)) +
geom_point() +
scale_size_area(max_size = 20) +
geom_text()
plot <- ggplot(
data = prevs_long,
aes(x = condition,
y = value)) +
ylab("Prevalence")
plot(p)
plot(plot)
plot +
geom_point(
aes(
size = n,
fill = race_col_lab
)
) +
scale_size_area(max_size = 20) +
geom_text(
aes(
label = race_eth_text
)
)
plot +
geom_point(
aes(
size = n,
fill = race_col_lab
)
) +
scale_size_area(max_size = 20) +
geom_text_repel(
aes(
label = race_eth_text
)
)
library(ggrepel)
install.packages("ggrepel")
library(ggrepel)
plot +
geom_point(
aes(
size = n,
fill = race_col_lab
)
) +
scale_size_area(max_size = 20) +
geom_text_repel(
aes(
label = race_eth_text
)
)
plot +
geom_point(
aes(
size = n,
fill = race_col_lab
)
) +
scale_size_area(max_size = 20) +
geom_text_repel(
aes(
label = race_eth_text
size = 3
plot +
geom_point(
aes(
size = n,
fill = race_col_lab
)
) +
scale_size_area(max_size = 20) +
geom_text_repel(
aes(
label = race_eth_text,
size = 3
)
)
plot +
geom_point(
aes(
size = n,
fill = race_col_lab
)
) +
scale_size_area(max_size = 20) +
geom_text_repel(
aes(
label = race_eth_text
)
)
plot +
geom_point(
aes(
size = n,
color = race_col_lab
)
) +
scale_size_area(max_size = 20) +
geom_text_repel(
aes(
label = race_eth_text
)
)
plot +
geom_point(
aes(
size = n,
color = race_col_lab
)
) +
scale_size_area(max_size = 20) +
geom_text_repel(
aes(
label = race_eth_text,
max.overlaps = Inf
)
)
plot +
geom_point(
aes(
size = n,
color = race_col_lab
)
) +
scale_size_area(max_size = 20) +
geom_text_repel(
aes(
label = race_eth_text,
color = race_col_lab
)
)
## Calculate unweighted prevalences of asthma and binge drinking
prevs <- brfss1720 %>%
group_by(race_eth_text,
race_col_lab) %>%
filter(n() >= 30) %>%
summarize(asthma = mean(asthma, na.rm = T)*100,
binge = mean(binge, na.rm = T)*100,
n = n())
## Scatterplot prevalences (go to long format first)
prevs_long <- prevs %>%
pivot_longer(cols = c("asthma", "binge"),
names_to = "condition")
plot <- ggplot(
data = prevs_long,
aes(x = condition,
y = value)) +
ylab("Prevalence")
plot +
geom_point(
aes(
size = n,
color = race_col_lab
)
) +
scale_size_area(max_size = 20) +
geom_text_repel(
aes(
label = race_eth_text,
color = race_col_lab
)
)
plot +
geom_point(
aes(
size = n,
color = race_col_lab
)
) +
scale_size_area(max_size = 20) +
geom_text_repel(
aes(
label = race_eth_text,
color = race_col_lab,
force = 2
)
)
plot +
geom_point(
aes(
size = n,
color = race_col_lab
)
) +
scale_size_area(max_size = 20) +
geom_text_repel(
aes(
label = race_eth_text,
color = race_col_lab,
nudge_x = -0.05
)
)
plot +
geom_point(
aes(
size = n,
color = race_col_lab
)
) +
scale_size_area(max_size = 20) +
geom_text_repel(
aes(
label = race_eth_text,
color = race_col_lab
)
)
plot +
geom_point(
aes(
size = n,
color = race_col_lab
)
) +
scale_size_area(max_size = 20) +
geom_text_repel(
aes(
label = race_eth_text,
color = race_col_lab
)
) +
scale_color_brewer(palette = "PuOr")
plot +
geom_point(
aes(
size = n,
color = race_col_lab
)
) +
scale_size_area(max_size = 20) +
geom_text_repel(
aes(
label = race_eth_text,
color = race_col_lab
)
) +
scale_color_brewer(palette = "Dark2")
plot +
geom_point(
aes(
size = n,
color = race_col_lab
)
) +
scale_size_area(max_size = 30) +
geom_text_repel(
aes(
label = race_eth_text,
color = race_col_lab
)
) +
scale_color_brewer(palette = "Dark2")
plot +
geom_point(
aes(
size = n,
color = race_col_lab
)
) +
scale_size_area(max_size = 30) +
geom_text_repel(
aes(
label = race_eth_text,
color = race_col_lab
)
) +
scale_color_brewer(palette = "Set1")
plot <- ggplot(
data = prevs_long,
aes(x = condition,
y = value)) +
ylab("Prevalence") +
theme_bw()
plot +
geom_point(
aes(
size = n,
color = race_col_lab
)
) +
scale_size_area(max_size = 30) +
geom_text_repel(
aes(
label = race_eth_text,
color = race_col_lab
)
) +
scale_color_brewer(palette = "Dark2")
install.packages("paletteer")
library(paletteer)
paletteer_c(package = "RColorBrewer", palette = "pastel1", n = 8)
paletteer_c(package = "RColorBrewer", palette = "Pastel1", n = 8)
paletteer_d(package = "RColorBrewer", palette = "Pastel1", n = 8)
paletteer_d(`"RColorBrewer::Pastel1"`, n=8)
paletteer_d(`"nord::aurora"`, n=8)
plot +
geom_point(
aes(
size = n,
color = race_col_lab
)
) +
scale_size_area(max_size = 30) +
geom_text_repel(
aes(
label = race_eth_text,
color = race_col_lab
)
) +
scale_color_brewer(palette = "Dark2")
plot +
geom_point(
aes(
size = n,
color = race_col_lab
)
) +
scale_size_area(max_size = 30) +
geom_text_repel(
aes(
label = race_eth_text,
color = race_col_lab
)
) +
scale_color_manual(
values = c("fc8d59", "fee090", "ffffbf", "d9d9d9", "e0f3f8", "d73027", "91bfdb", "4575b4")
)
plot +
geom_point(
aes(
size = n,
color = race_col_lab
)
) +
scale_size_area(max_size = 30) +
geom_text_repel(
aes(
label = race_eth_text,
color = race_col_lab
)
) +
scale_color_manual(
values = c("#fdd0a2", "#d9f0a3", "#ffffbf", "#d9d9d9", "#fcc5c0", "#d73027", "#c6dbef", "#dadaeb")
)
plot +
geom_point(
aes(
size = n,
color = race_col_lab
)
) +
scale_size_area(max_size = 30) +
geom_text_repel(
aes(
label = race_eth_text,
color = race_col_lab
)
) +
scale_color_manual(
values = c("#fdd0a2", "#d9f0a3", "#ffffbf", "#d9d9d9", "#fcc5c0", "#cb181d", "#c6dbef", "#dadaeb")
)
save.image("~/Documents/GitHub/cabrfss_multiracial/brfss_mr_2023_06_12.RData")
